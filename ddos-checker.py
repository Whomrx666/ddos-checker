# Obfuscated by Mr.X
# Dont recode this kids:V
import base64
exec(base64.b64decode('aW1wb3J0IHJlcXVlc3RzCmltcG9ydCBzb2NrZXQKaW1wb3J0IHRpbWUKaW1wb3J0IG9zCmltcG9ydCBjb25jdXJyZW50LmZ1dHVyZXMKaW1wb3J0IHNzbAppbXBvcnQganNvbgppbXBvcnQgdXJsbGliLnJlcXVlc3QKaW1wb3J0IHRocmVhZGluZwpmcm9tIHByZXR0eXRhYmxlIGltcG9ydCBQcmV0dHlUYWJsZQpmcm9tIHB5ZmlnbGV0IGltcG9ydCBmaWdsZXRfZm9ybWF0CmltcG9ydCBkbnMucmVzb2x2ZXIKZnJvbSB1cmxsaWIucGFyc2UgaW1wb3J0IHVybGpvaW4KZnJvbSBiczQgaW1wb3J0IEJlYXV0aWZ1bFNvdXAKCmRlZiBiYW5uZXIoKToKICAgIG9zLnN5c3RlbSgiY2xlYXIiIGlmIG9zLm5hbWUgPT0gInBvc2l4IiBlbHNlICJjbHMiKQogICAgcHJpbnQoZmlnbGV0X2Zvcm1hdCgiZGRvcy1jaGVja2VyIikpCiAgICBwcmludCgiQ3JlYXRlZCBieSBNci5YIC0gV2Vic2l0ZSBERG9TIEFuYWx5emVyXG4iKQoKZGVmIGdldF9pcChkb21haW4pOgogICAgdHJ5OgogICAgICAgIHJldHVybiBzb2NrZXQuZ2V0aG9zdGJ5bmFtZShkb21haW4pCiAgICBleGNlcHQ6CiAgICAgICAgcmV0dXJuIE5vbmUKCmRlZiBnZW9pcF9sb29rdXAoaXApOgogICAgdHJ5OgogICAgICAgIHdpdGggdXJsbGliLnJlcXVlc3QudXJsb3BlbihmImh0dHBzOi8vaXBpbmZvLmlvL3tpcH0vanNvbiIpIGFzIHJlc3BvbnNlOgogICAgICAgICAgICBkYXRhID0ganNvbi5sb2FkKHJlc3BvbnNlKQogICAgICAgICAgICByZXR1cm4gZGF0YS5nZXQoImNpdHkiLCAiVW5rbm93biIpICsgIiwgIiArIGRhdGEuZ2V0KCJyZWdpb24iLCAiVW5rbm93biIpICsgIiwgIiArIGRhdGEuZ2V0KCJjb3VudHJ5IiwgIlVua25vd24iKQogICAgZXhjZXB0OgogICAgICAgIHJldHVybiAiVW5rbm93biIKCmRlZiBjaGVja19kbnNfdHRsKGRvbWFpbik6CiAgICB0cnk6CiAgICAgICAgYW5zd2VyID0gZG5zLnJlc29sdmVyLnJlc29sdmUoZG9tYWluLCAnQScpCiAgICAgICAgZm9yIHJkYXRhIGluIGFuc3dlci5yZXNwb25zZS5hbnN3ZXI6CiAgICAgICAgICAgIHJldHVybiByZGF0YS50dGwKICAgIGV4Y2VwdDoKICAgICAgICByZXR1cm4gTm9uZQoKZGVmIGNoZWNrX2NkbihoZWFkZXJzKToKICAgIGNkbl9pbmRpY2F0b3JzID0gWyJjbG91ZGZsYXJlIiwgImFrYW1haSIsICJzdWN1cmkiLCAiZmFzdGx5Il0KICAgIGZvciBrZXksIHZhbCBpbiBoZWFkZXJzLml0ZW1zKCk6CiAgICAgICAgdmFsID0gdmFsLmxvd2VyKCkKICAgICAgICBmb3IgY2RuIGluIGNkbl9pbmRpY2F0b3JzOgogICAgICAgICAgICBpZiBjZG4gaW4gdmFsOgogICAgICAgICAgICAgICAgcmV0dXJuIGNkbi5jYXBpdGFsaXplKCkKICAgIHJldHVybiAiTm9uZSBEZXRlY3RlZCIKCmRlZiBkZXRlY3RfZmlyZXdhbGwoaGVhZGVycyk6CiAgICBmaXJld2FsbF9rZXl3b3JkcyA9IHsKICAgICAgICAiQ2xvdWRmbGFyZSI6IFsiY2YtcmF5IiwgInNlcnZlcjogY2xvdWRmbGFyZSJdLAogICAgICAgICJTdWN1cmkiOiBbIngtc3VjdXJpLWlkIiwgIngtc3VjdXJpLWNhY2hlIl0sCiAgICAgICAgIkFXUyBXQUYiOiBbIngtYW16bi1yZXF1ZXN0aWQiLCAieC1hbXotYXBpZ3ctaWQiXSwKICAgICAgICAiSW1wZXJ2YS9JbmNhcHN1bGEiOiBbIngtY2RuIiwgIngtaWluZm8iXSwKICAgICAgICAiRERvUy1HdWFyZCI6IFsic2VydmVyOiBkZG9zLWd1YXJkIl0KICAgIH0KCiAgICBoZWFkZXJfY29tYmluZWQgPSAiXG4iLmpvaW4oW2Yie2subG93ZXIoKX06IHt2Lmxvd2VyKCl9IiBmb3IgaywgdiBpbiBoZWFkZXJzLml0ZW1zKCldKQogICAgZGV0ZWN0ZWQgPSBbXQoKICAgIGZvciBmd19uYW1lLCBpbmRpY2F0b3JzIGluIGZpcmV3YWxsX2tleXdvcmRzLml0ZW1zKCk6CiAgICAgICAgaWYgYW55KGluZGljYXRvciBpbiBoZWFkZXJfY29tYmluZWQgZm9yIGluZGljYXRvciBpbiBpbmRpY2F0b3JzKToKICAgICAgICAgICAgZGV0ZWN0ZWQuYXBwZW5kKGZ3X25hbWUpCgogICAgcmV0dXJuIGRldGVjdGVkIGlmIGRldGVjdGVkIGVsc2UgWyJOb3QgRGV0ZWN0ZWQiXQoKZGVmIHJlc3BvbnNlX3RpbWUodXJsKToKICAgIHRyeToKICAgICAgICBzdGFydCA9IHRpbWUudGltZSgpCiAgICAgICAgcmVzID0gcmVxdWVzdHMuZ2V0KHVybCwgdGltZW91dD01KQogICAgICAgIGVuZCA9IHRpbWUudGltZSgpCiAgICAgICAgcmV0dXJuIHJvdW5kKGVuZCAtIHN0YXJ0LCAzKSwgcmVzCiAgICBleGNlcHQ6CiAgICAgICAgcmV0dXJuIE5vbmUsIE5vbmUKCmRlZiBzdHJlc3NfdGVzdCh1cmwsIGNvdW50PTUwKToKICAgIG91dHB1dCA9IFsiXG5bIV0gTWVsYWt1a2FuIHN0cmVzcyB0ZXN0IHJpbmdhbiAoe30gcGVybWludGFhbikuLi4iLmZvcm1hdChjb3VudCldCiAgICBlcnJvcnMgPSAwCiAgICB0aW1lcyA9IFtdCgogICAgZGVmIHNlbmRfcmVxdWVzdCgpOgogICAgICAgIG5vbmxvY2FsIGVycm9ycwogICAgICAgIHRyeToKICAgICAgICAgICAgc3RhcnQgPSB0aW1lLnRpbWUoKQogICAgICAgICAgICByID0gcmVxdWVzdHMuZ2V0KHVybCwgdGltZW91dD01KQogICAgICAgICAgICB0aW1lcy5hcHBlbmQodGltZS50aW1lKCkgLSBzdGFydCkKICAgICAgICAgICAgcmV0dXJuIHIuc3RhdHVzX2NvZGUKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIGVycm9ycyArPSAxCiAgICAgICAgICAgIHJldHVybiBOb25lCgogICAgd2l0aCBjb25jdXJyZW50LmZ1dHVyZXMuVGhyZWFkUG9vbEV4ZWN1dG9yKG1heF93b3JrZXJzPTIwKSBhcyBleGVjdXRvcjoKICAgICAgICBzdGF0dXNfY29kZXMgPSBsaXN0KGV4ZWN1dG9yLm1hcChsYW1iZGEgXzogc2VuZF9yZXF1ZXN0KCksIHJhbmdlKGNvdW50KSkpCgogICAgbW9zdF9jb21tb24gPSBtYXgoc2V0KHN0YXR1c19jb2RlcyksIGtleT1zdGF0dXNfY29kZXMuY291bnQpIGlmIHN0YXR1c19jb2RlcyBlbHNlICJOL0EiCiAgICBhdmdfcmVzcG9uc2UgPSBzdW0odGltZXMpL2xlbih0aW1lcykgaWYgdGltZXMgZWxzZSAiVGltZW91dCIKCiAgICBvdXRwdXQuYXBwZW5kKGYiICAtIFBlcm1pbnRhYW4gYmVyaGFzaWwgOiB7Y291bnQgLSBlcnJvcnN9IikKICAgIG91dHB1dC5hcHBlbmQoZiIgIC0gUGVybWludGFhbiBnYWdhbCAgICA6IHtlcnJvcnN9IikKICAgIG91dHB1dC5hcHBlbmQoZiIgIC0gU3RhdHVzIGNvZGUgdW11bSAgICA6IHttb3N0X2NvbW1vbn0iKQogICAgb3V0cHV0LmFwcGVuZChmIiAgLSBSYXRhLXJhdGEgcmVzcG9uICAgIDoge3JvdW5kKGF2Z19yZXNwb25zZSwgMyl9IGRldGlrIiBpZiBpc2luc3RhbmNlKGF2Z19yZXNwb25zZSwgZmxvYXQpIGVsc2UgIiAgLSBUaW1lb3V0IHNlbXVhIikKCiAgICBpZiBlcnJvcnMgPiBjb3VudCAqIDAuMzoKICAgICAgICBvdXRwdXQuYXBwZW5kKCIgIC0gWyFdIFNlcnZlciByZW50YW4gb3ZlcmxvYWQuIFBvdGVuc2kgRERvUyB0aW5nZ2kuIikKICAgIGVsaWYgaXNpbnN0YW5jZShhdmdfcmVzcG9uc2UsIGZsb2F0KSBhbmQgYXZnX3Jlc3BvbnNlID4gMjoKICAgICAgICBvdXRwdXQuYXBwZW5kKCIgIC0gWyFdIFJlc3BvbiBsYW1iYXQgc2FhdCB0cmFmZmljIG1lbmluZ2thdC4iKQogICAgZWxzZToKICAgICAgICBvdXRwdXQuYXBwZW5kKCIgIC0gW09LXSBTZXJ2ZXIgY3VrdXAgc3RhYmlsIHVudHVrIGJlYmFuIHJpbmdhbi4iKQoKICAgIGZvciBsaW5lIGluIG91dHB1dDoKICAgICAgICBwcmludChsaW5lKQogICAgcmV0dXJuIG91dHB1dAoKZGVmIHBvcnRfc2NhbihpcCk6CiAgICBwcmludCgiXG5bIV0gTWVsYWt1a2FuIHBlbWluZGFpYW4gcG9ydCB1bXVtLi4uIikKICAgIGNvbW1vbl9wb3J0cyA9IHsKICAgICAgICAyMTogIkZUUCIsIDIyOiAiU1NIIiwgMjM6ICJUZWxuZXQiLCAyNTogIlNNVFAiLCA1MzogIkROUyIsCiAgICAgICAgODA6ICJIVFRQIiwgMTEwOiAiUE9QMyIsIDEyMzogIk5UUCIsIDE0MzogIklNQVAiLCAxNjE6ICJTTk1QIiwKICAgICAgICA0NDM6ICJIVFRQUyIsIDQ0NTogIlNNQiIsIDMzMDY6ICJNeVNRTCIsIDMzODk6ICJSRFAiLCAKICAgICAgICAxOTAwOiAiU1NEUCIsIDExMjExOiAiTWVtY2FjaGVkIiwgMTk6ICJDaGFyZ2VuIgogICAgfQoKICAgIG9wZW5fcG9ydHMgPSBbXQogICAgZm9yIHBvcnQsIG5hbWUgaW4gY29tbW9uX3BvcnRzLml0ZW1zKCk6CiAgICAgICAgc29jayA9IHNvY2tldC5zb2NrZXQoc29ja2V0LkFGX0lORVQsIHNvY2tldC5TT0NLX1NUUkVBTSkKICAgICAgICBzb2NrLnNldHRpbWVvdXQoMC41KQogICAgICAgIHJlc3VsdCA9IHNvY2suY29ubmVjdF9leCgoaXAsIHBvcnQpKQogICAgICAgIGlmIHJlc3VsdCA9PSAwOgogICAgICAgICAgICBvcGVuX3BvcnRzLmFwcGVuZCgocG9ydCwgbmFtZSkpCiAgICAgICAgc29jay5jbG9zZSgpCgogICAgaWYgb3Blbl9wb3J0czoKICAgICAgICBwcmludCgiWytdIFBvcnQgdGVyYnVrYSB0ZXJkZXRla3NpOiIpCiAgICAgICAgZm9yIHBvcnQsIHNlcnZpY2UgaW4gb3Blbl9wb3J0czoKICAgICAgICAgICAgYWxlcnQgPSAiIC0gUmF3YW4gRERvUyIgaWYgc2VydmljZSBpbiBbIk5UUCIsICJETlMiLCAiTWVtY2FjaGVkIiwgIlNTRFAiLCAiQ2hhcmdlbiJdIGVsc2UgIiIKICAgICAgICAgICAgcHJpbnQoZiIgIC0gUG9ydCB7cG9ydH0gKHtzZXJ2aWNlfSl7YWxlcnR9IikKICAgIGVsc2U6CiAgICAgICAgcHJpbnQoIlstXSBUaWRhayBhZGEgcG9ydCB1bXVtIHlhbmcgdGVyYnVrYSB0ZXJkZXRla3NpLiIpCgogICAgcmV0dXJuIG9wZW5fcG9ydHMKCmRlZiBmdWxsX3BvcnRfc2NhbihpcCk6CiAgICBwcmludCgiXG5bIV0gTWVsYWt1a2FuIGZ1bGwgcG9ydCBzY2FuICgx4oCTNjU1MzUpLi4uIEJpc2EgbWFrYW4gd2FrdHUgYmViZXJhcGEgbWVuaXQuIikKICAgIG9wZW5fcG9ydHMgPSBbXQoKICAgIGRlZiBzY2FuKHBvcnQpOgogICAgICAgIHRyeToKICAgICAgICAgICAgd2l0aCBzb2NrZXQuc29ja2V0KHNvY2tldC5BRl9JTkVULCBzb2NrZXQuU09DS19TVFJFQU0pIGFzIHNvY2s6CiAgICAgICAgICAgICAgICBzb2NrLnNldHRpbWVvdXQoMC4xKQogICAgICAgICAgICAgICAgcmVzdWx0ID0gc29jay5jb25uZWN0X2V4KChpcCwgcG9ydCkpCiAgICAgICAgICAgICAgICBpZiByZXN1bHQgPT0gMDoKICAgICAgICAgICAgICAgICAgICBvcGVuX3BvcnRzLmFwcGVuZChwb3J0KQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgcGFzcwoKICAgIHRocmVhZHMgPSBbXQogICAgZm9yIHBvcnQgaW4gcmFuZ2UoMSwgNjU1MzYpOgogICAgICAgIHQgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1zY2FuLCBhcmdzPShwb3J0LCkpCiAgICAgICAgdGhyZWFkcy5hcHBlbmQodCkKICAgICAgICB0LnN0YXJ0KCkKICAgICAgICBpZiBsZW4odGhyZWFkcykgPj0gNTAwOgogICAgICAgICAgICBmb3IgdGhyZWFkIGluIHRocmVhZHM6CiAgICAgICAgICAgICAgICB0aHJlYWQuam9pbigpCiAgICAgICAgICAgIHRocmVhZHMuY2xlYXIoKQoKICAgIGZvciB0aHJlYWQgaW4gdGhyZWFkczoKICAgICAgICB0aHJlYWQuam9pbigpCgogICAgcHJpbnQoZiJbK10gVG90YWwgcG9ydCB0ZXJidWthOiB7bGVuKG9wZW5fcG9ydHMpfSIpCiAgICBpZiBvcGVuX3BvcnRzOgogICAgICAgIHByaW50KCIgICAgIiwgIiwgIi5qb2luKG1hcChzdHIsIHNvcnRlZChvcGVuX3BvcnRzKSkpKQogICAgcmV0dXJuIG9wZW5fcG9ydHMKCmRlZiBhbmFseXplX3Jlc2lsaWVuY2UodXJsKToKICAgIHByaW50KCJcblshXSBNZW5nYW5hbGlzaXMgZGF5YSB0YWhhbiB0YXJnZXQgYmVyZGFzYXJrYW4ga29udGVuIGhhbGFtYW4uLi4iKQogICAgdHJ5OgogICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmwsIHRpbWVvdXQ9NSkKICAgICAgICBiYXNlX3NpemUgPSBsZW4ocmVzLmNvbnRlbnQpCiAgICAgICAgdG90YWxfc2l6ZSA9IGJhc2Vfc2l6ZQogICAgICAgIHNvdXAgPSBCZWF1dGlmdWxTb3VwKHJlcy50ZXh0LCAiaHRtbC5wYXJzZXIiKQogICAgICAgIHN0YXRpY19maWxlcyA9IFtdCgogICAgICAgIGZvciB0YWcgaW4gc291cC5maW5kX2FsbChbImltZyIsICJzY3JpcHQiLCAibGluayJdKToKICAgICAgICAgICAgc3JjID0gdGFnLmdldCgic3JjIikgb3IgdGFnLmdldCgiaHJlZiIpCiAgICAgICAgICAgIGlmIHNyYyBhbmQgbm90IHNyYy5zdGFydHN3aXRoKCJkYXRhOiIpOgogICAgICAgICAgICAgICAgZnVsbF91cmwgPSB1cmxqb2luKHVybCwgc3JjKQogICAgICAgICAgICAgICAgc3RhdGljX2ZpbGVzLmFwcGVuZChmdWxsX3VybCkKCiAgICAgICAgZm9yIGxpbmsgaW4gc3RhdGljX2ZpbGVzOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICByID0gcmVxdWVzdHMuaGVhZChsaW5rLCB0aW1lb3V0PTUsIGFsbG93X3JlZGlyZWN0cz1UcnVlKQogICAgICAgICAgICAgICAgc2l6ZSA9IGludChyLmhlYWRlcnMuZ2V0KCJDb250ZW50LUxlbmd0aCIsIDApKQogICAgICAgICAgICAgICAgdG90YWxfc2l6ZSArPSBzaXplCiAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgIHRvdGFsX2tiID0gcm91bmQodG90YWxfc2l6ZSAvIDEwMjQsIDIpCiAgICAgICAgcHJpbnQoZiJbK10gVWt1cmFuIHRvdGFsIGhhbGFtYW4gZGFuIHJlc291cmNlOiB+e3RvdGFsX2tifSBLQiIpCgogICAgICAgIGVzdGltYXRlZF9oaXRzID0gcm91bmQoKDEwMCAqIDEwMjQgKiAxMDI0KSAvIHRvdGFsX3NpemUpCiAgICAgICAgcHJpbnQoZiJbK10gRXN0aW1hc2kganVtbGFoIHJlcXVlc3QgdW50dWsgbWVuZ2hhYmlza2FuIDEwME1CIGJhbmR3aWR0aDogfntlc3RpbWF0ZWRfaGl0c30ga2FsaSIpCgogICAgICAgIHJldHVybiB0b3RhbF9rYgoKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludCgiWy1dIEdhZ2FsIG1lbmdhbmFsaXNpcyBkYXlhIHRhaGFuIHRhcmdldDoiLCBzdHIoZSkpCiAgICAgICAgcmV0dXJuIE5vbmUKCmRlZiBkZXRlY3RfcmF0ZV9saW1pdGluZyh1cmwpOgogICAgcHJpbnQoIlxuWyFdIE1lbmdlY2VrIHJhdGUtbGltaXRpbmcgKGFudGktZmxvb2QpLi4uIikKICAgIHN0YXR1c19jb2RlcyA9IFtdCgogICAgZm9yIF8gaW4gcmFuZ2UoMTApOgogICAgICAgIHRyeToKICAgICAgICAgICAgciA9IHJlcXVlc3RzLmdldCh1cmwsIHRpbWVvdXQ9MykKICAgICAgICAgICAgc3RhdHVzX2NvZGVzLmFwcGVuZChyLnN0YXR1c19jb2RlKQogICAgICAgICAgICB0aW1lLnNsZWVwKDAuNSkKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIHN0YXR1c19jb2Rlcy5hcHBlbmQoIlRpbWVvdXQiKQoKICAgIGlmIDQyOSBpbiBzdGF0dXNfY29kZXMgb3Igc3RhdHVzX2NvZGVzLmNvdW50KDQwMykgPiAyOgogICAgICAgIHByaW50KCJbIV0gVGVyZGV0ZWtzaSByYXRlLWxpbWl0aW5nIChIVFRQIDQyOSBhdGF1IDQwMyBzZXJpbmcgbXVuY3VsKS4iKQogICAgZWxzZToKICAgICAgICBwcmludCgiW09LXSBUaWRhayB0ZXJkZXRla3NpIHJhdGUtbGltaXRpbmcgc2VjYXJhIGplbGFzLiIpCgpkZWYgc3NsX3Rsc19zY2FuKGRvbWFpbik6CiAgICBwcmludCgiXG5bIV0gTWVtZXJpa3NhIGluZm8gc2VydGlmaWthdCBTU0wvVExTLi4uIikKICAgIGNvbnRleHQgPSBzc2wuY3JlYXRlX2RlZmF1bHRfY29udGV4dCgpCiAgICB0cnk6CiAgICAgICAgd2l0aCBzb2NrZXQuY3JlYXRlX2Nvbm5lY3Rpb24oKGRvbWFpbiwgNDQzKSwgdGltZW91dD01KSBhcyBzb2NrOgogICAgICAgICAgICB3aXRoIGNvbnRleHQud3JhcF9zb2NrZXQoc29jaywgc2VydmVyX2hvc3RuYW1lPWRvbWFpbikgYXMgc3NvY2s6CiAgICAgICAgICAgICAgICBjZXJ0ID0gc3NvY2suZ2V0cGVlcmNlcnQoKQogICAgICAgICAgICAgICAgcHJvdG9jb2wgPSBzc29jay52ZXJzaW9uKCkKICAgICAgICAgICAgICAgIHByaW50KGYiWytdIFRMUyBWZXJzaW9uOiB7cHJvdG9jb2x9IikKICAgICAgICAgICAgICAgIHByaW50KGYiWytdIENvbW1vbiBOYW1lOiB7Y2VydC5nZXQoJ3N1YmplY3QnLCBbWydDTicsICdVbmtub3duJ11dKVswXVswXVsxXX0iKQogICAgICAgICAgICAgICAgcHJpbnQoZiJbK10gRXhwaXJ5OiB7Y2VydC5nZXQoJ25vdEFmdGVyJyl9IikKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChmIlstXSBHYWdhbCBjZWsgU1NML1RMUzoge2V9IikKCmRlZiBzYXZlX3JlcG9ydChkYXRhLCBkb21haW4pOgogICAgcHJpbnQoIlxuSW5naW4gbWVueWltcGFuIGxhcG9yYW4/IikKICAgIHByaW50KCIgIFsxXSBZYSwgZm9ybWF0IFRYVCIpCiAgICBwcmludCgiICBbMl0gWWEsIGZvcm1hdCBIVE1MIikKICAgIHByaW50KCIgIFszXSBZYSwgZm9ybWF0IEpTT04iKQogICAgcHJpbnQoIiAgWzRdIFRpZGFrIikKICAgIHBpbGloYW4gPSBpbnB1dCgiUGlsaWggb3BzaSAoMS00KTogIikuc3RyaXAoKQoKICAgIGZpbGVuYW1lX2Jhc2UgPSBmImRkb3NfcmVwb3J0X3tkb21haW4ucmVwbGFjZSgnLicsICdfJyl9IgoKICAgIGlmIHBpbGloYW4gPT0gIjEiOgogICAgICAgIHdpdGggb3BlbihmIntmaWxlbmFtZV9iYXNlfS50eHQiLCAidyIpIGFzIGY6CiAgICAgICAgICAgIGYud3JpdGUoZGF0YSkKICAgICAgICBwcmludChmIlsrXSBMYXBvcmFuIGRpc2ltcGFuIHNlYmFnYWkge2ZpbGVuYW1lX2Jhc2V9LnR4dCIpCiAgICBlbGlmIHBpbGloYW4gPT0gIjIiOgogICAgICAgIGh0bWxfY29udGVudCA9IGYiPGh0bWw+PGJvZHk+PHByZT57ZGF0YX08L3ByZT48L2JvZHk+PC9odG1sPiIKICAgICAgICB3aXRoIG9wZW4oZiJ7ZmlsZW5hbWVfYmFzZX0uaHRtbCIsICJ3IikgYXMgZjoKICAgICAgICAgICAgZi53cml0ZShodG1sX2NvbnRlbnQpCiAgICAgICAgcHJpbnQoZiJbK10gTGFwb3JhbiBkaXNpbXBhbiBzZWJhZ2FpIHtmaWxlbmFtZV9iYXNlfS5odG1sIikKICAgIGVsaWYgcGlsaWhhbiA9PSAiMyI6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBqc29uX2RhdGEgPSBqc29uLmxvYWRzKGRhdGEpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBqc29uX2RhdGEgPSB7InJlcG9ydCI6IGRhdGF9CiAgICAgICAgd2l0aCBvcGVuKGYie2ZpbGVuYW1lX2Jhc2V9Lmpzb24iLCAidyIpIGFzIGY6CiAgICAgICAgICAgIGpzb24uZHVtcChqc29uX2RhdGEsIGYsIGluZGVudD00KQogICAgICAgIHByaW50KGYiWytdIExhcG9yYW4gZGlzaW1wYW4gc2ViYWdhaSB7ZmlsZW5hbWVfYmFzZX0uanNvbiIpCiAgICBlbHNlOgogICAgICAgIHByaW50KCJbLV0gTGFwb3JhbiB0aWRhayBkaXNpbXBhbi4iKQoKZGVmIGFuYWx5emUoZG9tYWluLCBtb2RlPSJwYXNzaXZlIik6CiAgICByZXBvcnRfbGluZXMgPSBbXQogICAgaXAgPSBnZXRfaXAoZG9tYWluKQogICAgaWYgbm90IGlwOgogICAgICAgIHByaW50KCJVbmFibGUgdG8gcmVzb2x2ZSBkb21haW4uIikKICAgICAgICByZXR1cm4KCiAgICB1cmwgPSBmImh0dHA6Ly97ZG9tYWlufSIKICAgIHJlc3BfdGltZSwgcmVzcG9uc2UgPSByZXNwb25zZV90aW1lKHVybCkKICAgIHR0bCA9IGNoZWNrX2Ruc190dGwoZG9tYWluKQogICAgY2RuID0gY2hlY2tfY2RuKHJlc3BvbnNlLmhlYWRlcnMpIGlmIHJlc3BvbnNlIGVsc2UgIlVua25vd24iCiAgICBmaXJld2FsbCA9IGRldGVjdF9maXJld2FsbChyZXNwb25zZS5oZWFkZXJzKSBpZiByZXNwb25zZSBlbHNlIFsiVW5rbm93biJdCgogICAgeCA9IFByZXR0eVRhYmxlKCkKICAgIHguZmllbGRfbmFtZXMgPSBbIlBhcmFtZXRlciIsICJSZXN1bHQiXQogICAgeC5hZGRfcm93KFsiSVAgQWRkcmVzcyIsIGlwXSkKICAgIHguYWRkX3JvdyhbIkdlb0lQIExvY2F0aW9uIiwgZ2VvaXBfbG9va3VwKGlwKV0pCiAgICB4LmFkZF9yb3coWyJETlMgVFRMIiwgdHRsIGlmIHR0bCBlbHNlICJVbmtub3duIl0pCiAgICB4LmFkZF9yb3coWyJDRE4gVXNlZCIsIGNkbl0pCiAgICB4LmFkZF9yb3coWyJGaXJld2FsbCBEZXRlY3RlZCIsICIsICIuam9pbihmaXJld2FsbCldKQogICAgeC5hZGRfcm93KFsiUmVzcG9uc2UgVGltZSIsIGYie3Jlc3BfdGltZX0gc2VjIiBpZiByZXNwX3RpbWUgZWxzZSAiVGltZW91dCJdKQogICAgcHJpbnQoeCkKICAgIHJlcG9ydF9saW5lcy5hcHBlbmQoeC5nZXRfc3RyaW5nKCkpCgogICAgc3NsX3Rsc19zY2FuKGRvbWFpbikKICAgIGRldGVjdF9yYXRlX2xpbWl0aW5nKHVybCkKCiAgICBzY29yZSA9IDAKICAgIGlmIG1vZGUgPT0gImFnZ3Jlc3NpdmUiOgogICAgICAgIG91dHB1dCA9IHN0cmVzc190ZXN0KHVybCkKICAgICAgICByZXBvcnRfbGluZXMuZXh0ZW5kKG91dHB1dCkKICAgICAgICBwb3J0cyA9IHBvcnRfc2NhbihpcCkKICAgICAgICBhbGxfb3Blbl9wb3J0cyA9IGZ1bGxfcG9ydF9zY2FuKGlwKQogICAgICAgIHBhZ2Vfa2IgPSBhbmFseXplX3Jlc2lsaWVuY2UodXJsKQoKICAgICAgICBsYXllcjRfdnVsbiA9IGFueShwb3J0IGZvciBwb3J0LCBzZXJ2aWNlIGluIHBvcnRzIGlmIHNlcnZpY2UgaW4gWyJOVFAiLCAiRE5TIiwgIk1lbWNhY2hlZCIsICJTU0RQIiwgIkNoYXJnZW4iXSkKICAgICAgICBsYXllcjdfdnVsbiA9IHBhZ2Vfa2IgYW5kIHBhZ2Vfa2IgPiAxMDI0CgogICAgICAgIHZ1bG5fc2NvcmUgPSAwCiAgICAgICAgbWl0aWdhdGlvbl9yZWNvbW1lbmRhdGlvbiA9IFtdCgogICAgICAgIGlmIGxheWVyNF92dWxuOgogICAgICAgICAgICB2dWxuX3Njb3JlICs9IDIKICAgICAgICAgICAgbWl0aWdhdGlvbl9yZWNvbW1lbmRhdGlvbi5hcHBlbmQoIi0gQWt0aWZrYW4gcmF0ZS1saW1pdGluZyAmIGZpcmV3YWxsIGRpIHBvcnQgdGVyYnVrYSByYXdhbiAoTlRQLCBETlMsIGRsbCkuIikKICAgICAgICAgICAgbWl0aWdhdGlvbl9yZWNvbW1lbmRhdGlvbi5hcHBlbmQoIi0gR3VuYWthbiBBQ0wgYXRhdSBJUCBmaWx0ZXJpbmcgcGFkYSBwb3J0IHNlcnZpY2UgVURQIHB1Ymxpay4iKQoKICAgICAgICBpZiBsYXllcjdfdnVsbjoKICAgICAgICAgICAgdnVsbl9zY29yZSArPSAyCiAgICAgICAgICAgIG1pdGlnYXRpb25fcmVjb21tZW5kYXRpb24uYXBwZW5kKCItIE9wdGltYWxrYW4gdWt1cmFuIGhhbGFtYW4gd2ViICYga29tcHJlc2kga29udGVuLiIpCiAgICAgICAgICAgIG1pdGlnYXRpb25fcmVjb21tZW5kYXRpb24uYXBwZW5kKCItIEltcGxlbWVudGFzaWthbiBDQVBUQ0hBIGF0YXUgV0FGIHVudHVrIG1lbWJhdGFzaSBib3QuIikKCiAgICAgICAgcHJpbnQoIlxuWytdIFBlbmlsYWlhbiBTa29yIGRhbiBNaXRpZ2FzaToiKQogICAgICAgIHByaW50KGYiICAtIFNrb3IgS2VyZW50YW5hbiBERG9TOiB7dnVsbl9zY29yZX0vNCIpCiAgICAgICAgaWYgdnVsbl9zY29yZSA+PSAzOgogICAgICAgICAgICBwcmludCgiICBbIV0gUmlzaWtvIHRpbmdnaSB0ZXJoYWRhcCBzZXJhbmdhbiBERG9TLiIpCiAgICAgICAgZWxpZiB2dWxuX3Njb3JlID09IDI6CiAgICAgICAgICAgIHByaW50KCIgIFshXSBSaXNpa28gc2VkYW5nIHRlcmhhZGFwIHNlcmFuZ2FuIEREb1MuIikKICAgICAgICBlbHNlOgogICAgICAgICAgICBwcmludCgiICBbT0tdIFJpc2lrbyByZW5kYWggdGVyaGFkYXAgc2VyYW5nYW4gRERvUy4iKQoKICAgICAgICBpZiBtaXRpZ2F0aW9uX3JlY29tbWVuZGF0aW9uOgogICAgICAgICAgICBwcmludCgiXG5bK10gUmVrb21lbmRhc2kgTWl0aWdhc2k6IikKICAgICAgICAgICAgZm9yIGl0ZW0gaW4gbWl0aWdhdGlvbl9yZWNvbW1lbmRhdGlvbjoKICAgICAgICAgICAgICAgIHByaW50KGYiICB7aXRlbX0iKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHByaW50KCJbT0tdIFRpZGFrIGFkYSByZWtvbWVuZGFzaSBraHVzdXMuIFNpc3RlbSByZWxhdGlmIGFtYW4uIikKCiAgICBlbHNlOgogICAgICAgIGlmIGNkbiA9PSAiTm9uZSBEZXRlY3RlZCI6CiAgICAgICAgICAgIHNjb3JlICs9IDEKICAgICAgICAgICAgcmVwb3J0X2xpbmVzLmFwcGVuZCgiLSBUaWRhayBtZW5nZ3VuYWthbiBDRE4gKHJlbnRhbiBMYXllciA3KS4iKQogICAgICAgIGlmICJOb3QgRGV0ZWN0ZWQiIGluIGZpcmV3YWxsOgogICAgICAgICAgICBzY29yZSArPSAxCiAgICAgICAgICAgIHJlcG9ydF9saW5lcy5hcHBlbmQoIi0gVGlkYWsgdGVyZGV0ZWtzaSBmaXJld2FsbCAodGlkYWsgYWRhIHByb3Rla3NpIExheWVyIDQvNykuIikKICAgICAgICBpZiB0dGwgYW5kIHR0bCA8IDMwMDoKICAgICAgICAgICAgc2NvcmUgKz0gMQogICAgICAgICAgICByZXBvcnRfbGluZXMuYXBwZW5kKCItIFRUTCBETlMgcmVuZGFoIChiaXNhIHJhd2FuIEROUyBmbG9vZCkuIikKICAgICAgICBpZiByZXNwX3RpbWUgYW5kIHJlc3BfdGltZSA+IDI6CiAgICAgICAgICAgIHNjb3JlICs9IDEKICAgICAgICAgICAgcmVwb3J0X2xpbmVzLmFwcGVuZCgiLSBSZXNwb24gbGFtYmF0IChiaXNhIG92ZXJsb2FkIGRhcmkgSFRUUCBmbG9vZCkuIikKCiAgICBhbmFseXNpc19zdW1tYXJ5ID0gIlxuXG5bK10gQU5BTFlTSVM6XG4iCiAgICBhbmFseXNpc19zdW1tYXJ5ICs9IGYiICAtIFByb3Rla3NpIENETiB0ZXJkZXRla3NpICA6IHtjZG4gaWYgY2RuICE9ICdOb25lIERldGVjdGVkJyBlbHNlICdUaWRhayB0ZXJkZXRla3NpJ31cbiIKICAgIGFuYWx5c2lzX3N1bW1hcnkgKz0gZiIgIC0gRmlyZXdhbGwgdGVyZGV0ZWtzaSAgICAgIDogeycsICcuam9pbihmaXJld2FsbCkgaWYgZmlyZXdhbGwgZWxzZSAnVGlkYWsgdGVyZGV0ZWtzaSd9XG4iCiAgICBhbmFseXNpc19zdW1tYXJ5ICs9IGYiICAtIEROUyBUVEwgICAgICAgICAgICAgICAgICA6IHt0dGwgaWYgdHRsIGVsc2UgJ1Vua25vd24nfVxuIgogICAgYW5hbHlzaXNfc3VtbWFyeSArPSBmIiAgLSBXYWt0dSBSZXNwb24gU2VydmVyICAgICAgOiB7Zid7cmVzcF90aW1lfSBkZXRpaycgaWYgcmVzcF90aW1lIGVsc2UgJ1RpbWVvdXQnfVxuIgoKICAgIGlmIG1vZGUgPT0gInBhc3NpdmUiOgogICAgICAgIGFuYWx5c2lzX3N1bW1hcnkgKz0gIlxuWytdIEV2YWx1YXNpIEtlcmVudGFuYW4gRERvUyAobW9kZSBwYXNzaXZlKTpcbiIKICAgICAgICBpZiBzY29yZSA+PSAzOgogICAgICAgICAgICBhbmFseXNpc19zdW1tYXJ5ICs9ICJbIV0gUE9URU5TSSBLRVJFTlRBTkFOIFRJTkdHSSB0ZXJoYWRhcCBERG9TLlxuIgogICAgICAgIGVsaWYgc2NvcmUgPT0gMjoKICAgICAgICAgICAgYW5hbHlzaXNfc3VtbWFyeSArPSAiWyFdIFBPVEVOU0kgS0VSRU5UQU5BTiBTRURBTkcgdGVyaGFkYXAgRERvUy5cbiIKICAgICAgICBlbHNlOgogICAgICAgICAgICBhbmFseXNpc19zdW1tYXJ5ICs9ICJbT0tdIFRpZGFrIGRpdGVtdWthbiBpbmRpa2FzaSBrdWF0IGtlcmVudGFuYW4gdGVyaGFkYXAgRERvUy5cbiIKCiAgICBlbHNlOgogICAgICAgIGFuYWx5c2lzX3N1bW1hcnkgKz0gIlxuWytdIEV2YWx1YXNpIEtlcmVudGFuYW4gRERvUyAobW9kZSBhZ2dyZXNzaXZlKTpcbiIKICAgICAgICBpZiBsYXllcjRfdnVsbjoKICAgICAgICAgICAgYW5hbHlzaXNfc3VtbWFyeSArPSAiWyFdIFRhcmdldCBtZW1pbGlraSBwb3J0IHRlcmJ1a2EgcmF3YW4gTGF5ZXIgNCBhbXBsaWZpY2F0aW9uIChOVFAvRE5TL1NTRFAvZXRjKS5cbiIKICAgICAgICBlbHNlOgogICAgICAgICAgICBhbmFseXNpc19zdW1tYXJ5ICs9ICJbT0tdIFRpZGFrIGFkYSBwb3J0IGFtcGxpZmljYXRpb24gTGF5ZXIgNCB1bXVtIHlhbmcgdGVyYnVrYS5cbiIKCiAgICAgICAgaWYgbGF5ZXI3X3Z1bG46CiAgICAgICAgICAgIGFuYWx5c2lzX3N1bW1hcnkgKz0gIlshXSBIYWxhbWFuIGJlc2FyICg+MU1CKSwgYmVycG90ZW5zaSByZW50YW4gdGVyaGFkYXAgTGF5ZXIgNyBIVFRQIEZsb29kLlxuIgogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGFuYWx5c2lzX3N1bW1hcnkgKz0gIltPS10gVWt1cmFuIGhhbGFtYW4gbWFzaWggd2FqYXIgdW50dWsgTGF5ZXIgNy5cbiIKCiAgICBwcmludChhbmFseXNpc19zdW1tYXJ5KQogICAgcmVwb3J0X2xpbmVzLmFwcGVuZChhbmFseXNpc19zdW1tYXJ5KQogICAgcmVwb3J0X2RhdGEgPSAiXG4iLmpvaW4ocmVwb3J0X2xpbmVzKQogICAgc2F2ZV9yZXBvcnQocmVwb3J0X2RhdGEsIGRvbWFpbikKCmlmIF9fbmFtZV9fID09ICJfX21haW5fXyI6CiAgICBiYW5uZXIoKQogICAgdGFyZ2V0ID0gaW5wdXQoIk1hc3Vra2FuIGRvbWFpbiB0YXJnZXQgKHRhbnBhIGh0dHAvaHR0cHMpOiAiKS5zdHJpcCgpCgogICAgcHJpbnQoIlxuUGlsaWggbW9kZSBzY2FuOiIpCiAgICBwcmludCgiICBbMV0gUGFzc2l2ZSAoYW1hbiwgdGlkYWsgbWVueWVyYW5nKSIpCiAgICBwcmludCgiICBbMl0gQWdncmVzc2l2ZSAoZGVuZ2FuIHN0cmVzcyB0ZXN0ICYgcG9ydCBzY2FuKSIpCiAgICBtb2RlX2lucHV0ID0gaW5wdXQoIk1hc3Vra2FuIHBpbGloYW4gKDEvMik6ICIpLnN0cmlwKCkKCiAgICBtb2RlID0gImFnZ3Jlc3NpdmUiIGlmIG1vZGVfaW5wdXQgPT0gIjIiIGVsc2UgInBhc3NpdmUiCiAgICBhbmFseXplKHRhcmdldCwgbW9kZSk=').decode('utf-8'))
